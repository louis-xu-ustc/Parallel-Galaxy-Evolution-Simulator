<section class="main-content">
    <h2>
        <a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span
                class="octicon octicon-link"></span></a><b>Project Proposal</b></h2>

    <h3>Parallel Galaxy Evolution Simulator</h3>

    <ul>
        <li>Yunpeng Xu (yunpengx)</li>
        <li>Zhikun Lao (zlao)</li>
    </ul>
    <h3>
        <a id="designer-templates" class="anchor" href="#designer-templates" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>Summary</h3>
    <ul style="list-style: none;">
        <li>
            <p>
                We are going to use CUDA to speedup the galaxy evolution simulator using different algorithms on the
                NVIDIA GPUs. Our goal is to compare and analyze the speedup performance of these algorithms.
            </p>
        </li>

    </ul>
    <h3>
        <a id="rather-drive-stick" class="anchor" href="#rather-drive-stick" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>BACKGROUND</h3>
    <ul style="list-style: none;">
        <li>
            <p>Galaxy evolution simulation usually forms beautiful spiral patterns as a result of rotation, collision,
                and fusion between different galaxies. However, the forming of these patterns needs a large amount of
                calculation. Our team wants to use what we have learned in this course to speedup such simulators.
            </p>
        </li>
        <li>
            <p>Basically, galaxy evolution simulator is based on force simulation to calculate the gravitational forces
                and motion of N bodies. There're mainly three methods to solve this problem: brute force, Barnes-Hut
                algorithm and Fast Multipole Method. The computational complexity decreases from N^2, N*lgN to N for
                these three algorithms. Our team will focus on the Barnes-Hut algorithm and Fast Multipole Method, and
                compare/analyze their speedup performance.
                Time allowing, our team also want to try Hamada's new algorithm [1] to solve the N-body simulation
                problem.
            </p>
        </li>
        <li>
            <p>The basic idea of the Barnes-Hut algorithm is to group the nearby particles by using a macro-particle
                located at the mass-weighted center of the area. If the distance between two groups is sufficiently far
                away, we can use the mass center in the actual calculation. Quad-tree is the data structure that's
                suitable to store the information for this problem. A quad-tree is similar to a binary tree but with 4
                children for each node. The root node represents the whole space and its 4 children can represent the
                four quadrants (NW, NE, SW and SE) of the space. Since the tree is a recursive structure, this procedure
                can be repeated until the leaf of the tree that represents a single body in this problem. The problem
                can benefit from parallelism in accumulating the gravitational force by traversing the Quad-tree and
                updating the position based on the exerted gravitational force.
            </p>
        </li>
        <li>
            <p>Fast Multipole Method is different from Barnes-Hut. It computes the potential at every body, not just the
                force exerted on the body. It also uses more information in each quadrant than the centric mass and
                total mass. This helps to increase the accuracy but also incurs more calculation of each iteration.</p>
        </li>
    </ul>

    <h3>
        <a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>THE CHALLENGE</h3>

    <ul style="list-style: none;">
        <li> The first challenge is that how to assign jobs evenly, since the amount of work per body is not uniform in
            each iteration. The amount of work for a body in a group with multiple of bodies is different from a body
            that's far away with most of the body groups. Also, bodies will move during two iterations. So the cost and
            communication patterns will also change over time.
        </li>
        <li> The second challenge is that how to handle collision between different bodies. Currently, our team hasn't
            decided how to handle this case. If we need to consider collision in this problem, it will make it more
            challenging, because the position update of one body may need to consider other bodies' influence and
            re-calculate where the body will go after that.
        </li>
    </ul>

    <h3>
        <a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>RESOURCES</h3>
    <ul>
        <li>
            Except for the [sequential version] <a target="_blank" href="https://github.com/kgabis/gravitysim"></a>
            (MIT license) of the
            Barnes-Hut algorithm, we will start from scratch. We will read several papers on the Barnes-Hut
            algorithm and the Fast Multipole Method approach. Those papers are listed in the reference section
            below.
        </li>
        <li>
            We will be using CUDA API
        </li>
        <li>
            We will be using GLFW graphical library, a multi-platform library for OpenGL
        </li>
    </ul>

    <h3>
        <a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>GOALS AND DELIVERABLES</h3>
    <bold>Plan To Achieve</bold>
    <ul>
        <li>
            CPU/GPU Barnes-Hut algorithm
        </li>
        <li>
            CPU/GPU Fast Multipole Method
        </li>
    </ul>
    <bold>Hope To Achieve</bold>
    <ul>
        <li>
            Hamada's new algorithm (improvement on the GPU versions of both algorithms)
        </li>
        <li>
            Formation of new planets under planet collision
        </li>

    </ul>
    <bold>Demo</bold>
    <ul>
        <li>We will possibly demonstrate a scene of galaxy collision where thousands of planets of multiple galaxies
            collide
            together. Real-time statistics will be shown in the screen, reflecting the number of frames per second and
            other
            staticstics. We will also show our speedup graphs which compare the performance of different versions of
            algorithms mentioend above.
        </li>
    </ul>

    <h3>
        <a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>PLATFORM CHOICE</h3>
    <ul style="list-style: none;">
        <li>
            <p>
                We will be implementing the simulator in C++ using CUDA platform to work with GeForce GTX 1080. As far
                as we know, this is the best GPUs we can get from CMU.
            </p>
        </li>
        <li>
            <p>
                We think this parallel system is suitable for our workload because our workload can be largely run in
                parallel. For example, in the Barnes-Hut algorithm, during each iteration, the forces applying on all
                particles can be potentially computed at the same time, as long as we stay within resource limit.
                Another example is for the computation of Fast Multipole Method. The dynamic parallelism available in
                CUDA API can help avoid subsequent index computations and achieve good performance. Although one "fits
                all" kernel is not possible for FMM and we will have to take a hybrid approach, this parallel platform
                is still our best choice so far.
            </p>
        </li>

    </ul>

    <h3>
        <a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>Schedule</h3>

    <table class="pure-table pure-table-horizontal">
        <thead>
        <tr bgcolor="#f0f0f0">
            <th>#</th>
            <th>Date</th>
            <th>Goals</th>
            <th>Status</th>
        </tr>
        </thead>

        <tbody>
        <tr>
            <td>1</td>
            <td nowrap="nowrap">4.10 - 4.16</td>
            <td>Refine the starter sequential implementation of the Barnes-Hut algorithm; Complete parallel
                implementation of the Barnes-Hut algorithm
            </td>
            <td></td>
        </tr>

        <tr bgcolor="#f0f0f0">
            <td>2</td>
            <td nowrap="nowrap">4.17 - 4.23</td>
            <td>Complete the sequential implementation of the Fast Multipole Method</td>
            <td></td>
        </tr>

        <tr>
            <td>3</td>
            <td nowrap="nowrap">4.23 - 4.24</td>
            <td>Conduct implementation refinement and complete project checkpoint report</td>
            <td></td>
        </tr>

        <tr bgcolor="#f0f0f0">
            <td>4</td>
            <td nowrap="nowrap">4.25 - 5.2</td>
            <td>Complete the parallel implementation of the Fast Multipole Method</td>
            <td></td>
        </tr>

        <tr>
            <td>5</td>
            <td nowrap="nowrap">5.3 - 5.8</td>
            <td>Complete any good-to-have features</td>
            <td></td>
        </tr>

        <tr bgcolor="#f0f0f0">
            <td>6</td>
            <td nowrap="nowrap">5.9 - 5.10</td>
            <td>Draft final report and complete project pages</td>
            <td>
            </td>
        </tr>
        </tbody>
    </table>
    <!--<font size="3"> <i> *Revised schedule</i></font>-->

    <h3>
        <a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>References<a name="ref"></a></h3>
    <ol type="1">
        <li>Hamada, Tsuyoshi, Tetsu Narumi, Rio Yokota, Kenji Yasuoka, Keigo Nitadori, and Makoto Taiji. "42 tflops
            hierarchical n-body simulations on GPUs with applications in both astrophysics and turbulence." In High
            Performance Computing Networking, Storage and Analysis, Proceedings of the Conference on, pp. 1-12. IEEE,
            2009.
        </li>
        <li>
            http://adl.stanford.edu/cme342/LectureNotesfiles/lecture13-14_1.pdf
        </li>
        <li>http://www.cs.princeton.edu/courses/archive/fall03/cs126/assignments/barnes-hut.html
        </li>
        <li>https://research.nvidia.com/sites/default/files/publications/karras2012hpg_paper.pdf
        </li>
        <li>http://on-demand.gputechconf.com/gtc/2015/presentation/S5548-Bartosz-Kohnke.pdf
        </li>
        <li>http://beltoforion.de/article.php?a=barnes-hut-galaxy-simulator
        </li>
    </ol>

    <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/louis-xu-ustc/Parallel-Galaxy-Evolution-Simulator">Parallel Galaxy Evolution Simulator</a> is maintained by <a
                href="https://github.com/louis-xu-ustc">louis-xu-ustc</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a
                href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a
                href="https://twitter.com/jasonlong">Jason Long</a>.</span>
    </footer>

</section>
